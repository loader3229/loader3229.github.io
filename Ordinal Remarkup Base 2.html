<html>
<head>
<title>Ordinal Remarkup Base 2</title>
<script src="/multitree/js/technical/break_eternity.js"></script>
<script>
var breakpoints=[
    ["1",[1]],
    ["ω",[1,2]],
    ["Ψ(Ω)",[1,3]],
    ["Ψ(Ω+1)",[1,3,2]],
    ["Ψ(Ω+ω)",[1,3,2,3]],
    ["Ψ(Ω+ω+1)",[1,3,2,3,2]],
    ["Ψ(Ω×ω)",[1,3,4]]
];
function _0ypush(a,b,skip,add){
    for(let i=skip;i<b.length;i++)a.push(b[i]+add);
    return a;
}
function get_breakpoint(log_a,recursion){
    if(log_a.gte(Decimal.tetrate(10,10.118207440274801))){
        var test=log_a.slog().sub(2.1182074402748).floor();
        return ["Ψ(Ω^ω+Ω×("+get_ordinal(test,0)+")+"+get_ordinal(log_a,0)+")",_0ypush(_0ypush([1,3,5,6],get_0yseq(test,0),3,2),get_0yseq(log_a,0),0,1)];
    }
    if(log_a.gte(Decimal.tetrate(10,6.118207440274801))){
        var test=log_a.slog().sub(2.1182074402748).floor();
        return ["Ψ(Ω^ω+Ω×("+get_ordinal(test,0)+")+"+get_ordinal(log_a,0)+")",_0ypush(_0ypush([1,3,5,6],get_0yseq(test,0),0,2),get_0yseq(log_a,0),0,1)];
    }
    if(log_a.gte(Decimal.tetrate(10,5.118207440274801))){
        return ["Ψ(Ω^ω+Ω×ω+Ω+"+get_ordinal(log_a,0)+")",_0ypush([1,3,5,6,3,4,3],get_0yseq(log_a,0),0,1)];
    }
    if(log_a.gte(Decimal.tetrate(10,4.118207440274801))){
        return ["Ψ(Ω^ω+Ω×ω+"+get_ordinal(log_a,0)+")",_0ypush([1,3,5,6,3,4],get_0yseq(log_a,0),0,1)];
    }
    if(log_a.gte(Decimal.pow(2,2**70))){
        return ["Ψ(Ω^ω+Ω+"+get_ordinal(log_a.sub(Decimal.pow(2,2**70)),0)+")",_0ypush([1,3,5,6,3],get_0yseq(log_a.sub(Decimal.pow(2,2**70)),0),0,1)];
    }
    if(log_a.gte(2**70)){
        return ["Ψ(Ω^ω+"+get_ordinal(log_a.sub(2**70),0)+")",_0ypush([1,3,5,6],get_0yseq(log_a.sub(2**70),0),0,1)];
    }
    if(log_a.gte(71)){
        return ["Ψ(Ω×ω+Ω+"+get_ordinal(log_a.sub(70),0)+")",_0ypush([1,3,4,3],get_0yseq(log_a.sub(70),0),0,1)];
    }
    if(log_a.gte(70)){
        return ["Ψ(Ω×ω+Ω)",[1,3,4,3]];
    }
    if(log_a.gte(7)){
        return ["Ψ(Ω×ω+"+get_ordinal(log_a.sub(6),0)+")",_0ypush([1,3,4],get_0yseq(log_a.sub(6),0),0,1)];
    }
    return breakpoints[log_a.floor().toNumber()];
}
function get_ordinal(a,recursion){
    if(recursion>=10)return "...";
    a=new Decimal(a);
    if(a.gte(Decimal.dInf))return "Ω";
    if(a.lt(1))return "0";
    var log_a=a.log(2);
    log_a=log_a.floor();
    var sub_a=Decimal.pow(2,log_a).round();
    var tmp=get_breakpoint(log_a);
    if(!tmp)return "Way Too Large";
    return (tmp[0]+"+"+get_ordinal(a.sub(sub_a),recursion+1)).replaceAll("+0","");
}
var markup_count=new Decimal(0);

function get_0yseq(a,recursion){
    a=new Decimal(a);
    if(a.gte(Decimal.dInf))return ["Way Too Large"];
    if(a.lt(1))return [];
    var log_a=a.log(2);
    log_a=log_a.floor();
    var sub_a=Decimal.pow(2,log_a).round();
    var tmp=get_breakpoint(log_a);
    if(!tmp)return ["Way Too Large"];
    var _0yseq=[];
    for(i in tmp[1]){
        _0yseq.push(tmp[1][i]);
        if(_0yseq.length>=50)return _0yseq;
    }
    var tmp2=get_0yseq(a.sub(sub_a),recursion+1);
    for(i in tmp2){
        _0yseq.push(tmp2[i]);
        if(_0yseq.length>=50)return _0yseq;
    }
    return _0yseq;
}
function update(){
    document.getElementById("current_count").innerHTML=markup_count;
    document.getElementById("current_ordinal").innerHTML=get_ordinal(markup_count,0,0);
    document.getElementById("next_ordinal").innerHTML=get_ordinal(markup_count.add(1),0,0);
    document.getElementById("current_0yseq").innerHTML=get_0yseq(markup_count,0,0).join(",");
    document.getElementById("next_0yseq").innerHTML=get_0yseq(markup_count.add(1),0,0).join(",");
    document.getElementById("current_bms").innerHTML=convert2(get_0yseq(markup_count,0,0).slice(0,25));
    document.getElementById("next_bms").innerHTML=convert2(get_0yseq(markup_count.add(1),0,0).slice(0,25));
}
setInterval(update,10);
</script>
<script>
// https://fiveyeargaokao.github.io/googology/bms-0y%E4%B8%80%E9%94%AE%E8%BD%AC%E6%8D%A2.html
function convert2(s) {    //0-Y to BMS
        if(s[0]=="Way Too Large")return "Way Too Large"
            let l = s.length
            let rows = 0
            let res = Array(l)
            let parents = Array(l)
            let resTest = ''
            let x = true
            for (let i = 0; i < l; i++) {    //Initialize the arrays
                parents[i] = i - 1
                s[i] = parseInt(s[i])
                res[i] = []
            }
            while (x) {
                let t = Array(l)
                x = false
                for (let i = 0; i < l; i++) {
                    let k = i
                    while (k >= 0 && s[k] >= s[i]) {    //Find the parent
                        k = parents[k]
                    }
                    parents[i] = k
                    if (k >= 0) {
                        x = true
                        t[i] = s[i] - s[k]
                        res[i].push((res[k][rows] + 1))
                    } else {
                        t[i] = 1
                        res[i].push(0)
                    }
                }
                s = [...t]
                rows++
            }
            for (let i = 0; i < l; i++) {
                res[i].pop()
                resTest += ('(' + res[i].join(',') + ')')
            }
            return resTest
    }
</script>
</head>
<body>
<h1>Ordinal Remarkup! (Base 2)</h1>
<a href="javascript:void(markup_count=markup_count.add(1));">Markup!</a><br>
<a href="javascript:void(markup_count=markup_count.mul(2));">Double Markup!</a><br>
<a href="javascript:void(markup_count=markup_count.pow(2));">Squared Markup!</a><br>
<a href="javascript:void(markup_count=Decimal.pow(2,markup_count));">Powered Markup!</a><br>
Count: <span id="current_count"></span><br>
Current: <span id="current_ordinal"></span><br>
Next: <span id="next_ordinal"></span><br>
Current 0-Y Sequence: <span id="current_0yseq"></span><br>
Next 0-Y Sequence: <span id="next_0yseq"></span><br>
Current BMS: <span id="current_bms"></span><br>
Next BMS: <span id="next_bms"></span>
</body>
</html>